{% extends "base.html" %}
{% load widget_tweaks %}

{% block header %}
{% endblock %}

{% block content %}

<script>
	function change_filter() {
		if (document.getElementById('id_filter_deactive').checked) {
			location.href = "{% url 'sao:employee_list' %}\?filtered";
		}
		else {
			location.href = "{% url 'sao:employee_list' %}";
		}
	}


</script>

<div class="container">
	<div class="row mt-3">
		<div class="col">
			<h4>スタッフ一覧</h4>
		</div>
		<div class="col">
			<div class="float-end">

				<a href={% url 'sao:add_employee' %} class="btn btn-info">スタッフを追加する</a>
			</div>
		</div>

	</div>


	<div class="col mt-3">
		<table>
			<tr>
				<td>在籍</td>
				<td>{{current_staff.0}}</td>
				<td>正：{{current_staff.1}}</td>
				<td>派：{{current_staff.2}}</td>
				<td>委：{{current_staff.3}}</td>
			</tr>
			<tr>
				<td>全</td>
				<td>{{whole_staff.0}}</td>
				<td>正：{{whole_staff.1}}</td>
				<td>派：{{whole_staff.2}}</td>
				<td>委：{{whole_staff.3}}</td>
			</tr>
		</table>
	</div>

	<div class="col checkbox">
		<input id="id_filter_deactive" type="checkbox" name="filter-staff" onchange=change_filter()
			{{checked}}>在籍スタッフ以外は非表示
	</div>

	<table class="table table-striped table-bordered mt-3">
		<tr>
			<th>社員番号</th>
			<th>氏名</th>
			<th>雇用形態</th>
			<th>ステータス</th>
			<th>所属</th>
			<th>入社日付</th>
			<th>勤務時間</th>
			<th>管理職</th>
			<th>固定残業制</th>
			<th>操作</th>
		</tr>
		{% for a in employees %}
		<tr {% if not a.is_active %}class="warning" {%endif%}>
			<td>{{a.basic_info.employee_no}}</td>
			<td>{{a.basic_info.name}}</td>
			<td>{{a.employee_type}}</td>
			<td>{{a.status}}</td>
			<td>{{a.department}}</td>
			<td>{{a.basic_info.join_date}}</td>
			<td>{{a.working_hour}}</td>
			<td class="text-center">
				{% if a.manager %}
				<span class="oi oi-check"></span>
				{% endif %}
			</td>

			<td class="text-center">
				{% if a.include_overtime_pay %}
				<span class="oi oi-check"></span>
				{% endif %}
			</td>

			<td>
				<a href="{% url 'sao:edit_employee' a.employee_no %}" class="btn btn-default" title="編集">
					<span class="oi oi-pencil"></span>
				</a>

				<a href="{% url 'sao:employee_hour_view' a.employee_no %}" class="btn btn-default" title="勤務時間の割り当て">
					<span class="oi oi-clock"></span>
				</a>

				<a href="{% url 'sao:leave_from_company' a.employee_no %}" class="btn btn-default" title="退社処理">
					<span class="oi oi-eject"></span>
				</a>
			</td>
		</tr>

		{% endfor %}
	</table>



</div>
{% endblock %}


{% block footer%}
{% endblock %}

</div><!-- // #footer -->